<div class="content-pane right-pane">

  <div class="col-sm-8 item-content empty-selection" ng-show="loadingContent || loadingForm">
    <div>
      <div class="loader"></div>
    </div>
  </div>

  <div class="col-sm-8 item-content empty-selection" ng-show="!selected && !loadingContent">
    <div>{{'No contact selected' | translate}}</div>
  </div>

  <div class="col-sm-8 item-content empty-selection" ng-show="!loadingContent && !loadingForm && contentError">
    <div>{{'error.loading.form' | translate}}</div>
  </div>

  <div class="col-sm-8 item-content item-body" ng-show="selected && form && !loadingContent && !loadingForm">
    <div id="contact-report" class="enketo">
      <div class="container pages"></div>
      <div class="form-footer">
        <button class="btn btn-default previous-page">&lt; {{'Previous' | translate}}</button>
        <button class="btn btn-primary next-page">{{'Next' | translate}} &gt;</button>
        <a class="btn submit btn-primary" ng-click="save()" ng-disabled="saving">{{'Submit' | translate}}</a>
        <div class="loader inline small" ng-show="saving"></div>
      </div>
    </div>
  </div>

  <div class="col-sm-8 item-content item-body" ng-show="selected && !loadingContent && !form">
    <div>
      <div class="status">
        <span class="mm-badge mm-badge-round">
          <span class="fa" ng-class="{
            'fa-user': selected.doc.type === 'person',
            'fa-home': selected.doc.type === 'clinic',
            'fa-hospital-o': selected.doc.type === 'health_center',
            'fa-building': selected.doc.type === 'district_hospital'
          }"></span>
        </span>
      </div>

      <div class="body">
        <h2>{{selected.doc.name}}</h2>
        <h5 ng-show="selected.doc.type === 'person'">{{'Person' | translate}}</h5>
        <h5 ng-show="selected.doc.type === 'clinic'">{{'Clinic' | translate}}</h5>
        <h5 ng-show="selected.doc.type === 'health_center'">{{'Health Center' | translate}}</h5>
        <h5 ng-show="selected.doc.type === 'district_hospital'">{{'District Hospital' | translate}}</h5>
        <ul>
          <li ng-show="selected.doc.type !== 'person'">
            <label>{{'Contact' | translate}}</label>
            <p>
              <span ng-show="!selected.doc.contact._id">{{selected.doc.contact.name}}</span>
              <a ng-click="select(selected.doc.contact._id)" ng-show="selected.doc.contact._id">{{selected.doc.contact.name}}</a>
            </p>
          </li>
          <li>
            <label>{{'Phone Number' | translate}}</label>
            <p><a href="tel:{{selected.doc.phone || selected.doc.contact.phone}}">
              {{selected.doc.phone || selected.doc.contact.phone}}
            </a></p>
          </li>
          <li ng-show="selected.doc.type !== 'person'">
            <label>{{'External ID' | translate}}</label>
            <p>{{selected.doc.external_id}}</p>
          </li>
          <li ng-show="selected.doc.type === 'person'">
            <label>{{'RC Code' | translate}}</label>
            <p>{{selected.doc.rc_code}}</p>
          </li>
          <li>
            <label>{{'Notes' | translate}}</label>
            <p>{{selected.doc.notes}}</p>
          </li>
          <li ng-if="selected.doc.parent._id">
            <label ng-show="selected.doc.parent.type === 'clinic'">{{'Clinic' | translate}}</label>
            <label ng-show="selected.doc.parent.type === 'health_center'">{{'Health Center' | translate}}</label>
            <label ng-show="selected.doc.parent.type === 'district_hospital'">{{'District Hospital' | translate}}</label>
            <p>
              <a ng-click="select(selected.doc.parent._id)">
                {{selected.doc.parent.name}}
              </a>
            </p>
          </li>
          <li ng-if="selected.doc.parent.parent._id">
            <label ng-show="selected.doc.parent.parent.type === 'health_center'">{{'Health Center' | translate}}</label>
            <label ng-show="selected.doc.parent.parent.type === 'district_hospital'">{{'District Hospital' | translate}}</label>
            <p>
              <a ng-click="select(selected.doc.parent.parent._id)">
                {{selected.doc.parent.parent.name}}
              </a>
            </p>
          </li>
          <li ng-if="selected.doc.parent.parent.parent._id">
            <label>{{'District Hospital' | translate}}</label>
            <p>
              <a ng-click="select(selected.doc.parent.parent.parent._id)">
                {{selected.doc.parent.parent.parent.name}}
              </a>
            </p>
          </li>
          <li ng-if="selected.contactFor.length">
            <label>{{'Primary Contact For' | translate}}</label>
            <ul>
              <li class="row" ng-repeat="place in selected.contactFor">
                <div class="col-sm-4">
                  <a ng-click="select(place.doc._id)">{{place.doc.name}}</a>
                </div>
                <div class="col-sm-8">
                  {{place.doc.parent | clinic}}
                </div>
              </li>
            </ul>
          </li>
          <li ng-if="selected.children.length">
            <label ng-show="selected.type === 'district_hospital'">{{'Health Centers' | translate}}</label>
            <label ng-show="selected.type === 'health_center'">{{'Clinics' | translate}}</label>
            <ul>
              <li class="row" ng-repeat="child in selected.children">
                <div class="col-sm-4">
                  <a ng-click="select(child.doc._id)">{{child.doc.name}}</a>
                </div>
                <div class="col-sm-4">
                  {{child.doc.contact.name}}
                </div>
                <div class="col-sm-4">
                  {{child.doc.contact.phone}}
                </div>
              </li>
            </ul>
          </li>
          <li ng-if="selected.doc.type === 'person'" class="contact-tasks">
            <label>{{'Tasks' | translate}}</label>
            <ul>
              <li ng-repeat="task in selected.tasks">
                <a ui-sref="tasks.detail({ id: task._id })">{{task.title | translateFrom:task}}</a>
                <span ng-bind-html="task.date | relativeDate"></span>
              </li>
            </ul>
          </li>
          <li>
            <label>{{'Submit Report' | translate}}</label>
            <ul>
              <li ng-repeat="form in formDefinitions">
                <a ng-click="submitReport(form)">{{form.title}}</a>
              </li>
            </ul>
          </li>
          <li ng-if="selected.doc.type === 'person'">
            <label>{{'Reports' | translate}}</label>
            <ul>
              <li ng-repeat="report in selected.reports">
                <a ui-sref="reports.detail({ id: report._id })">{{report | title:forms}}</a>
                <span ng-bind-html="report.reported_date | relativeDate"></span>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

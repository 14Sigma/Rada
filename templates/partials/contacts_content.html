<div class="content-pane right-pane">

  <div class="col-sm-8 item-content empty-selection" ng-show="loadingContent">
    <div>
      <div class="loader"></div>
    </div>
  </div>

  <div class="col-sm-8 item-content empty-selection" ng-show="!selected && !loadingContent">
    <div>{{'No contact selected' | translate}}</div>
  </div>

  <div class="col-sm-8 item-content item-body" ng-show="selected && !loadingContent">
    <div>
      <div class="status">
        <span class="mm-badge mm-badge-round">
          <span class="fa" ng-class="selectedSchema().badge"></span>
        </span>
      </div>

      <div class="body">
        <h2>{{selected.doc.name}}</h2>
        <h5>{{'contact.type.' + selected.doc.type | translate}}</h5>
        <ul>
          <li ng-repeat="(name, conf) in selectedSchemaNormalFields()">
            <label>{{selected.doc.type + '.field.' + name | translate}}</label>
            <p>
              <span ng-if="conf.type === 'tel'"><a href="tel:{{selected.doc[name]}}">{{selected.doc[name]}}</a></span>
              <span ng-if="conf.type.indexOf('db:') === 0"><a ui-sref="contacts.detail({ id: selected.doc[name]._id })">{{selected.doc[name].name}}</a></span>
              <span ng-if="conf.type !== 'tel' && conf.type.indexOf('db:') !== 0">{{selected.doc[name]}}</span>
            </p>
          </li>
          <li ng-repeat="parent in selected.parents">
            <label>{{'contact.type.' + parent.type | translate}}</label>
            <p><a ui-sref="contacts.detail({ id: parent._id })">{{parent.name}}</a></p>
          </li>
          <li ng-if="selected.contactFor.length">
            <label>{{'Primary Contact For' | translate}}</label>
            <ul>
              <li class="row" ng-repeat="place in selected.contactFor">
                <div class="col-sm-4">
                  <a ui-sref="contacts.detail({ id: place.doc._id })">{{place.doc.name}}</a>
                </div>
                <div class="col-sm-8" ng-bind-html="place.doc.parent | clinic"></div>
              </li>
            </ul>
          </li>
          <li ng-if="selected.children.length">
            <label>{{selected.doc.type + '.field.children' | translate}}</label>
            <ul>
              <li class="row" ng-repeat="child in selected.children">
                <div class="col-sm-4">
                  <a ui-sref="contacts.detail({ id: child.doc._id })">{{child.doc.name}}</a>
                </div>
                <div class="col-sm-4">
                  {{child.doc.contact.name}}
                </div>
                <div class="col-sm-4">
                  {{child.doc.contact.phone}}
                </div>
              </li>
            </ul>
          </li>
          <li ng-if="selected.tasks" class="contact-tasks">
            <label>{{'Tasks' | translate}}</label>
            <ul>
              <li ng-repeat="task in selected.tasks">
                <a ui-sref="tasks.detail({ id: task._id })">{{task.title | translateFrom:task}}</a>
                <span ng-bind-html="task.date | relativeDate"></span>
              </li>
            </ul>
          </li>
          <li>
            <label>{{'Submit Report' | translate}}</label>
            <ul>
              <li ng-repeat="form in formDefinitions">
                <a ui-sref="contacts.report({ id: selected.doc._id, formId: form.internalId })">{{form.title | translateFrom}}</a>
              </li>
            </ul>
          </li>
          <li ng-if="selected.reports">
            <label>{{'Reports' | translate}}</label>
            <ul>
              <li ng-repeat="report in selected.reports">
                <a ui-sref="reports.detail({ id: report._id })">{{report | title:forms}}</a>
                <span ng-bind-html="report.reported_date | relativeDate"></span>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
